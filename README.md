## Проект для автоматизации процессов научных учереждений и их сотрудников ##

### Стек ###
Проект выполнен на стеках .net core 5.0 (C# 9.0) и anguler 10 (typescript). В качестве базы данных используется Postgres. Весь проект будет запускать в docker-контейнере. В будущем весь проект будет работать в k8s. Операционная система, где будет развернуто работающая версия системы, - это Ubuntu 20.04 LTS (возможно более новая, как появится).

---

### Архитектура ###
Текущее решение представляет собой монолит. В будущем планируется переход на микросервисную архитектуру. Сейчас frontend-проект лежить в основном backend-проекте веб-приложения, реализованного как web api на базе aspnetcore 5.0. Посмотреть frontend-проект можно в каталоге Sbran.WebApp/ClientApp. Само решение для backend-приложения сейчас разбито на четыре проекта:
 - Sbran.Shared (общие типы для всех проектов)
 - Sbran.Domain (слой предметной области)
 - Sbran.CQS (примитивное разделение CRUD на команды и запросы)
 - Sbran.WebApp (веб-приложение, слой инфраструктуры)
 
---
 
### IDEs ###
Для локального запуска проекта требуется установить Visual Studio 2019 Community (free completely), либо Rider (30-days trial). Также для запуска можно установить Visual Studio Code (free completely) с набором расширение для frontend и backend разработки. Также можно воспользоваться любыми другими IDE, но здесь будет рассмотрен запуск в Visual Studio 2019 Community.

Также для запуска проекта требуется установка docker и docker-compose последних релизных версий.

Возможно, что потребуется установка [node.js](https://nodejs.org/en/), [npm package manager](https://docs.npmjs.com/about-npm) и [angular cli](https://angular.io/guide/setup-local#install-the-angular-cli).

---

### Локальный запуск приложения ###
Склонируйте проект в папку с проектами и перейдите в корень проекта iad-sbras. Убедитесь, что вы стоите на ветке develop, либо на ветке, созданной от develop. Далее, найдите файл с расширением \*.sln и откройтие в Visual Studion 2019. После того, как проект открылся, нужно опять перейти в корневую папку с проектом и открыть консоль. В консоль выполнить команду:
> docker-compose -f docker-compose.yml up --build

Данная команда запустить всю нужную инфраструктуру (сейчас только postgres).
После того, как все запустится, нужно создать схему в базе данных. Для этого нужно опять перейти в корневую папку и в консоли набрать команду:
> .\local-machine-init-migration.ps1 update

После того, как все схемы были созданы, нужно запустить само приложение. Для этого нужно перейти в Visual Studio 2019 и выбрать профиль для запуска Sbran.WebApp. Запустить приложение под этим профилем и дождаться запуска. После запуска нужно перейти в окно браузера и в адресной строке набрать http://localhost:5000.

Если все сделано правильно, то должно открыться окно с проектом, в котором будет форма входа в систему.
